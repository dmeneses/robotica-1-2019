import java.text.DecimalFormat;

import lejos.hardware.motor.EV3LargeRegulatedMotor;
import lejos.hardware.port.MotorPort;
import lejos.hardware.port.SensorPort;
import lejos.hardware.sensor.EV3ColorSensor;
import lejos.hardware.sensor.EV3UltrasonicSensor;
import lejos.robotics.SampleProvider;
import lejos.utility.Delay;
public class Robot {
	EV3ColorSensor  sensor;
	EV3LargeRegulatedMotor motorD;
    EV3LargeRegulatedMotor motorI;
	public Robot ()
	{
		sensor = new  EV3ColorSensor(SensorPort.S4);
		motorD = new EV3LargeRegulatedMotor(MotorPort.C);
		motorI = new EV3LargeRegulatedMotor(MotorPort.B);
	}
	public void ReconocerColor()
	{
		SampleProvider sp = sensor.getColorIDMode();
	    String Color = null; 
		 while(true){
			    float[] sample = new float [sp.sampleSize()];
	        	sp.fetchSample(sample, 0);
	        	if(sample[0]==0)
	        	{
	        		 Color = "Rojo" ;	        	
	        		 rutaR(Color);
	        	}
	        	else if(sample[0]==1)
	        	{
	        		 Color = "Verde";
	        		 rutaV(Color);
	        	}
	        	else if(sample[0]==2)
	        	{
	        		 Color = "Azul";
	        		 rutaA(Color);
	        	}
	        	else if(sample[0]==3)
	        	{
	        		 Color = "Amarillo";
	        		 rutaY(Color);
	        	}
                } 
                }
	public void rutaR(String Color)
	{
		        System.out.println(Color);
		        if(Color == "Rojo"){
        	    motorI.setSpeed(motorI.getMaxSpeed());
        	    motorD.setSpeed(motorD.getMaxSpeed());
        	    motorI.rotate(310, true);
                motorD.rotate(-310);
                Delay.msDelay(900);
    	       }	      
	           }
	public void rutaV(String Color)
	           {
		       System.out.println(Color);
		       if(Color == "Verde"){
    	       motorI.setSpeed(motorI.getMaxSpeed());
    	       motorD.setSpeed(motorD.getMaxSpeed());
    	       motorI.rotate(360, true);
               motorD.rotate(360);
               Delay.msDelay(900);
	           }
} 
    public void rutaA(String Color) 
               {
    	       System.out.println(Color);
    	       if(Color == "Azul"){
 	           motorI.setSpeed(motorI.getMaxSpeed());
 	           motorD.setSpeed(motorD.getMaxSpeed());
 	           motorI.rotate(360, true);
               motorD.rotate(-460);
               Delay.msDelay(900);    	
               }
               }
               public void rutaY(String Color) 
               {
               System.out.println(Color);   
               if(Color == "Amarillo"){
               motorI.setSpeed(motorI.getMaxSpeed());
               motorD.setSpeed(motorD.getMaxSpeed());
               motorI.rotate(360, true);
               motorD.rotate(360);
               Delay.msDelay(900);    	
    }
    }
               public void leer(){
           		EV3LargeRegulatedMotor motorD = new EV3LargeRegulatedMotor(MotorPort.C);
           	    EV3LargeRegulatedMotor motorI = new EV3LargeRegulatedMotor(MotorPort.B);
           	    EV3UltrasonicSensor eyes = new EV3UltrasonicSensor(SensorPort.S1);
                while(true){
               	float[] muestras = new float[eyes.sampleSize()];
                	eyes.fetchSample(muestras, 0);
               	double distancia = muestras[0] * 100;
                  	DecimalFormat decimal = new DecimalFormat("0.00");
           	    System.out.println("Distance: " + decimal.format(distancia));
           	   	Delay.msDelay(1000);
                       	int D = 0;
                       	int S = 0;
                           double x = distancia;
                           D = (int)(((360*x)-3200)/17);
                       	S = D ;
                   	    //motorI.setAcceleration(10000);
                           motorD.setAcceleration(10000);
                       	motorI.setSpeed(motorI.getMaxSpeed());
                       	motorD.setSpeed(motorD.getMaxSpeed());
                       	motorI.rotate(D, true);
                           motorD.rotate(D);
           }
}
}























