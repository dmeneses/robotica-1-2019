import lejos.hardware.Sound;
import lejos.hardware.motor.EV3LargeRegulatedMotor;
import lejos.hardware.port.MotorPort;
import lejos.hardware.port.SensorPort;
import lejos.hardware.sensor.EV3ColorSensor;
import lejos.hardware.sensor.EV3UltrasonicSensor;
import lejos.robotics.SampleProvider;

public class Carro {
	EV3ColorSensor sensorColor = new EV3ColorSensor(SensorPort.S1);
	EV3UltrasonicSensor ultrasonic = new EV3UltrasonicSensor(SensorPort.S2);
	EV3LargeRegulatedMotor motorB = new EV3LargeRegulatedMotor(MotorPort.B);
	EV3LargeRegulatedMotor motorD = new EV3LargeRegulatedMotor(MotorPort.D);
	// SampleProvider muestrasCapturadas=ultrasonic.getDistanceMode();

	double diametroRueda = 5.5;

	public float detectarColor() {

		SampleProvider muestrasCapturadasColor = sensorColor.getColorIDMode();
		float[] datosDelSensor = new float[muestrasCapturadasColor.sampleSize()];
		muestrasCapturadasColor.fetchSample(datosDelSensor, 0);
		float color = datosDelSensor[0];
		Sound.beepSequenceUp();
		System.out.println("color=" + color);
		return color;
	}
	public double detectarObstaculo() {

		SampleProvider muestrasCapturadas = ultrasonic.getDistanceMode();
		float distanciaAlObstaculo = Float.POSITIVE_INFINITY;
		while (distanciaAlObstaculo == Float.POSITIVE_INFINITY) {
			float[] datosOjitos = new float[muestrasCapturadas.sampleSize()];
			muestrasCapturadas.fetchSample(datosOjitos, 0);
			System.out.println("dato enviado por sensor ="
					+ distanciaAlObstaculo);

			distanciaAlObstaculo = datosOjitos[0];

			distanciaAlObstaculo = Float.POSITIVE_INFINITY;

			return distanciaAlObstaculo;
		}
	 
	public void avanzar(double distancia){

		int grados = 0;
		double circunferencia1 = Math.PI * diametroRueda;
		double numeroDeRotaciones = distancia / circunferencia1;
		grados = (int) (numeroDeRotaciones * 360);

		int velocidad1 = 200;
		motorB.setSpeed(velocidad1);
		motorB.rotate(grados, true);
		motorD.setSpeed(velocidad1);
		motorD.rotate(grados);

		motorD.rotate(20);

		int distanciaAvance2 = 30;
		int grados2 = 0;
		double diametroRueda2 = 5.5;
		double circunferencia2 = Math.PI * diametroRueda;
		double numeroDeRotaciones2 = distanciaAvance2 / circunferencia2;
		grados2 = (int) (numeroDeRotaciones2 * 360);

		int velocidad = 200;
		motorB.setSpeed(velocidad);
		motorB.rotate(grados2, true);
		motorD.setSpeed(velocidad);
		motorD.rotate(grados2);

		motorB.stop();
		motorD.stop();

	}
	
	public void girar(int gradoGiro){
		
	}
	}
	 

}
